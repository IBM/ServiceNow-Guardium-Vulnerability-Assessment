<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sysevent_script_action">
    <sysevent_script_action action="DELETE">
        <active>true</active>
        <condition_script/>
        <description/>
        <event_name>x_ibmrt_gdpva.ChangeDatasourceMembe</event_name>
        <name>EventHandler_ChangeDatasourceMember</name>
        <order>100</order>
        <script><![CDATA[(function executeEventHandler(event, current) {
    if (!event) return;
    var name = '' + event.parm1;
    var details = (event.parm2 || '').split('|');
    if (details.length < 4) return;
    var operation = details[0].toLowerCase();
    var grp_sys_id = details[1];
    var ds_name = details[2];
    var cm_sys_id = details[3];

    try {
        var gAPI = new GuardiumAPI(GuardiumAPI.getGlideRecordCM(cm_sys_id, true));
        gAPI.authenticate();

        var exportMsg = new GuardiumExportDatasourceGroup().singleMemberUpdate(
            gAPI, grp_sys_id, ds_name, operation == 'delete'
        );

        switch (operation) {
            case 'delete':
                GuardiumLog.info("Successfully deleted member: " + name, this.type);
                break;
            default:
                GuardiumLog.info("Successfully synchronized member: " + name, this.type);
                break;
        }

    } catch (err) {
        GuardiumLog.error('', this.type, err);
        throw err;
    }

})(event, current);]]></script>
        <synchronous>false</synchronous>
        <sys_class_name>sysevent_script_action</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-04-25 15:09:47</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>c827398a2f83811049572f2ef699b6a3</sys_id>
        <sys_mod_count>13</sys_mod_count>
        <sys_name>EventHandler_ChangeDatasourceMember</sys_name>
        <sys_overrides/>
        <sys_package display_value="IBM Guardium Vulnerability Assessment" source="x_ibmrt_gdpva">400d30552fa0111049572f2ef699b65a</sys_package>
        <sys_policy/>
        <sys_scope display_value="IBM Guardium Vulnerability Assessment">400d30552fa0111049572f2ef699b65a</sys_scope>
        <sys_update_name>sysevent_script_action_c827398a2f83811049572f2ef699b6a3</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-08-26 19:13:31</sys_updated_on>
    </sysevent_script_action>
<sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="IBM Guardium Vulnerability Assessment">400d30552fa0111049572f2ef699b65a</application>
        <file_path/>
        <instance_id>110d0aa2db83df4489535d00cf9619e4</instance_id>
        <instance_name>dev63796</instance_name>
        <name>sysevent_script_action_c827398a2f83811049572f2ef699b6a3</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sysevent_script_action"&gt;
    &lt;sysevent_script_action action="INSERT_OR_UPDATE"&gt;
        &lt;active&gt;true&lt;/active&gt;
        &lt;condition_script/&gt;
        &lt;description/&gt;
        &lt;event_name&gt;x_ibmrt_gdpva.ChangeDatasourceMembe&lt;/event_name&gt;
        &lt;name&gt;EventHandler_ChangeDatasourceMember&lt;/name&gt;
        &lt;order&gt;100&lt;/order&gt;
        &lt;script&gt;&lt;![CDATA[(function executeEventHandler(event, current) {
    if (!event) return;
    var name = '' + event.parm1;
    var details = (event.parm2 || '').split('|');
    if (details.length &lt; 4) return;
    var operation = details[0].toLowerCase();
    var grp_sys_id = details[1];
    var ds_name = details[2];
    var cm_sys_id = details[3];

    try {
        var gAPI = new GuardiumAPI(GuardiumAPI.getGlideRecordCM(cm_sys_id, true));
        gAPI.authenticate();

        var exportMsg = new GuardiumExportDatasourceGroup().singleMemberUpdate(
            gAPI, grp_sys_id, ds_name, operation == 'delete'
        );

        switch (operation) {
            case 'delete':
                GuardiumLog.info("Successfully deleted member: " + name, this.type);
                break;
            default:
                GuardiumLog.info("Successfully synchronized member: " + name, this.type);
                break;
        }

    } catch (err) {
        GuardiumLog.error('', this.type, err);
        throw err;
    }

})(event, current);]]&gt;&lt;/script&gt;
        &lt;synchronous&gt;false&lt;/synchronous&gt;
        &lt;sys_class_name&gt;sysevent_script_action&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2022-04-25 15:09:47&lt;/sys_created_on&gt;
        &lt;sys_domain&gt;global&lt;/sys_domain&gt;
        &lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;
        &lt;sys_id&gt;c827398a2f83811049572f2ef699b6a3&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;13&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;EventHandler_ChangeDatasourceMember&lt;/sys_name&gt;
        &lt;sys_overrides/&gt;
        &lt;sys_package display_value="IBM Guardium Vulnerability Assessment" source="x_ibmrt_gdpva"&gt;400d30552fa0111049572f2ef699b65a&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="IBM Guardium Vulnerability Assessment"&gt;400d30552fa0111049572f2ef699b65a&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sysevent_script_action_c827398a2f83811049572f2ef699b6a3&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2022-08-26 19:13:31&lt;/sys_updated_on&gt;
    &lt;/sysevent_script_action&gt;
&lt;/record_update&gt;</payload>
        <payload_hash>184425067</payload_hash>
        <record_name>EventHandler_ChangeDatasourceMember</record_name>
        <reverted_from/>
        <source>2fc630759721d51022fa1c800153af00</source>
        <source_table>sys_upgrade_history</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-08-26 19:57:19</sys_created_on>
        <sys_id>41d6b0759721d51022fa1c800153afa1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>182dbbaf60c0000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-08-26 19:57:19</sys_updated_on>
        <type>Script Action</type>
        <update_guid>8dd6b0754321d51022f66860bd176aa0</update_guid>
        <update_guid_history>8dd6b0754321d51022f66860bd176aa0:0,781d79cd6a619110b3de9de495e0a2ed:0,928b9e183c0591505c69ff0242464384:0,d165ded8dec191503d542c08e4f3e78c:289230286,9358fe72ef6011106d7498eaf6df6159:502776106,9358fe72ef6011106d7498eaf6df6159:502776106,4af86aab91334110d3820db2d3aef603:1177899090,4af86aab91334110d3820db2d3aef603:1177899090,4af86aab91334110d3820db2d3aef603:1177899090,f0966e2bbf334110ef6bec058594f44f:2019853615,82b462e7b4334110156689579a6570b5:-2082603446,78933fe2597b81106df5c9cabd8cf874:-1177935113,cb446e1456b7c9106fbd2d46dcaf5ed7:-2021206856,cb446e1456b7c9106fbd2d46dcaf5ed7:-2021206856,23ac570f50a3c5109f284324c373861d:-1666431554,23ac570f50a3c5109f284324c373861d:-1666431554,059b9bcb45a3c51043fbf2b9de55bb6d:657430938,2d78b28fb323c510f979f98a15bde6bb:-876845189,8b5ae3426debc1101d21149fad71e6fb:-146887080,8b5ae3426debc1101d21149fad71e6fb:-146887080,abd893bc87270110e3a44302cb2e1651:-1420126846,abd893bc87270110e3a44302cb2e1651:-1420126846,867996c6e1078110f73c0ff3a545c07d:1296071563</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-09-15 20:22:37</sys_created_on>
        <sys_db_object display_value="" name="sysevent_script_action">sysevent_script_action</sys_db_object>
        <sys_id>77eeffea4f724590b63a164c19c7a0c4</sys_id>
        <sys_metadata>c827398a2f83811049572f2ef699b6a3</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>EventHandler_ChangeDatasourceMember</sys_name>
        <sys_package display_value="IBM Guardium Vulnerability Assessment" source="x_ibmrt_gdpva">400d30552fa0111049572f2ef699b65a</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="IBM Guardium Vulnerability Assessment">400d30552fa0111049572f2ef699b65a</sys_scope>
        <sys_scope_delete display_value="">08277f032832470884cde3b80e5e1640</sys_scope_delete>
        <sys_update_name>sysevent_script_action_c827398a2f83811049572f2ef699b6a3</sys_update_name>
        <sys_update_version display_value="sysevent_script_action_c827398a2f83811049572f2ef699b6a3">41d6b0759721d51022fa1c800153afa1</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-09-15 20:22:37</sys_updated_on>
    </sys_metadata_delete>
</record_update>
